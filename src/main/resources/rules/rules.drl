package com.drools.example
import javafx.stage.Stage
import javafx.scene.control.Button
import javafx.scene.Scene
import java.io.FileInputStream
import javafx.scene.image.Image
import javafx.scene.image.ImageView
import org.kie.api.runtime.KieRuntime
import javafx.scene.control.Alert
import javafx.scene.control.ButtonType;


function ImageView loadImageView(String path) {
    FileInputStream input = new FileInputStream(path);
    Image image = new Image(input);
    return new ImageView(image);
}

declare Answer
    ans : String
end


global Stage primaryStage

rule "Initial view"
when

then
        primaryStage.setTitle("HBox Experiment 1");

        ImageView imageView = loadImageView(Albums.KANYE_WEST_808_AND_HEARTBREAK.getPathName());

        //KieRuntime krt = kcontext.getKieRuntime();
        //krt.insert(imageView);

        ButtonType aaaa = new ButtonType("aaaa");

        Alert alert = new Alert(Alert.AlertType.CONFIRMATION, "Delete ?", aaaa, ButtonType.NO, ButtonType.CANCEL);
        alert.showAndWait();
        insert(new Answer());

        if (alert.getResult() == aaaa) {
            Answer ans = new Answer();
            ans.setAns("abcd");
            insert(ans);

        }

        //Scene scene = new Scene(button, 400, 400);
        //primaryStage.setScene(scene);
        //primaryStage.show();
end

rule "answer abcd"
when
    a  : Answer(!(ans == null) && ans.equals("abcd"))
then
    System.out.println(a.getAns());
    System.out.println(a.getAns());
end



declare enum Albums
   KANYE_WEST_808_AND_HEARTBREAK("Kanye West - 808s & Heartbreak", "src/main/resources/images/808s.png");

   fullName : String
   pathName : String
end